# <div align=center>**瓦贝共享公有区块链平台白皮书**</div>
## <div align=center>实体数字化样本</div>
### <div align=center>v1.0</div>

#### <div align=center><img src="./images/fisco.png" width = "256" height = "59" ></div>
### <div align=center>**Github**:[Https://github.com/wabei](Https://github.com/wabei)</div>

### <div align=center>2018年5月</div>



<!-- TOC -->

## 目录
- [前言](#前言)
- [一、项目摘要](#1-项目摘要)
- [二、项目介绍（设计原理及理念）](#2-项目介绍（设计原理及理念）)
    - [2.1 行业背景](#21-行业背景)
    - [2.2 瓦贝链的设计理念](#22-瓦贝链的设计理念)
    - [2.3 瓦贝链的设计原则](#23-瓦贝链的设计原则)
    - [2.4 产品模型与架构](#24-瓦贝链的设计原则)
    - [2.5 技术创新](#25-瓦贝链的设计原则)
    - [2.6 安全策略](#26-瓦贝链的设计原则)
    - [2.7 国密算法改造](#26-国密算法改造)
- [三、瓦贝链的应用实施方案](#3-瓦贝链的应用实施方案)
    - [3.1挖矿共识算法ethash](#31-挖矿共识算法ethash)
    - [3.2 项目应用落地](#32-项目应用落地)
    - [3.3 资源对接](#33-资源对接)
    - [3.4 生态激励机制(#34-生态激励机制)
- [四、项目前景展望](#4-项目前景展望)
    - [4.1 钱包合约](#41-钱包合约)
    - [4.2 社区组织](#42-社区组织)
    - [4.3 社交网络](#43-社交网络)
- [五、核心团队成员介绍](#5-核心团队成员介绍)
- [六、瓦贝链的安全管控及审计事项](#6-瓦贝链的安全管控及审计事项)
    - [6.1 交易安全](#41-交易安全)
    - [6.2 专业审计](#42-专业审计)
- [七、风险提示及免责声明](#4-风险提示及免责声明)
- [八、总结](#4-总结)
- [参考文献](#参考文献)
- [关于我们](#关于我们)

<!-- /TOC -->


## 前言 
   在资本和霸权笼罩的地球上，人类为了物质利益的争夺，从古至今，用强权和垄断资本去控制资源、获得人民劳动剩余价值似乎成为永恒不变的主题，我们要用技术的力量大破这种不公平，回到人类发展的俩个基点，实现反向平衡，即用民众消费去控制引导生产力，让民众消费获长期回报，由此产生消费为项目融资，项目为消费提供产品及投资回报的商业模式，同时实现大量闲置资产的二次优化利用，而这一共享经济模式要依赖于与去中心化技术的实现——区块链技术。愿意我们的努力能让世界更加平和、人民生活更加幸福！由此诞生——瓦贝共享公有区块链。

## 一、项目摘要

   瓦贝链是共享经济区块链化的表现形式，平台整合社会闲置资产资源产品，合理优化后为社会共享使用，达到物品尽其用，最大回馈社会的目的。瓦贝链的突出贡献在于使社会闲置资源得到经济利用和再利用，解决社会资源闲置利用和流动性问题，瓦贝链是以区块链技术为核心技术支撑，从技术角度看，将实体闲置资产资源产品甚至是服务产品数字化，促进其价值流动和二次利用，最有效措施是使用区块链技术，因此，区块链技术也被称为价值互联网技术，而瓦贝链是价值互联网在共享经济领域的实现形式之一。

## 二、项目介绍（设计原则与理念)
### 2.1 行业背景 
   共享经济，即瓦贝链的经济学原理，这个术语最早由美国德克萨斯州立大学社会学教授马科斯·费尔逊（Marcus Felson）和伊利诺伊大学社会学教授琼·斯潘思（Joel.Spaeth）于1978年发表的论文（Community Structureand Collaborative Consumption:ARoutine Activity Approach）中提出。其主要特点是，包括一个由第三方创建的、以信息技术为基础的市场平台。这个第三方可以是商业机构、组织或者政府。个体借助这些平台，交换闲置物品，分享自己的知识、经验，或者向企业、某个创新项目筹集资金。经济牵扯到三大主体，即商品或服务的需求方、供给方和共享经济平台。共享经济平台作为连接供需双方的纽带，通过移动LBS应用、动态算法与定价、双方互评体系等一系列机制的建立，使得供给与需求方通过共享经济平台进行交易。近五年来，中国共享经济呈现跨越式发展态势，其更新换代和创造新就业的速度引得全球瞩目，滴滴、ofo、运满满等代表企业的业务和运营模式领先全球。依靠发达的线上移动支付技术和线下物流设施，搭乘政府双创政策和中国风投的快车，共享经济的“中国模式”正在成型。一些共享经济从业者和创投界人士认为，属于中国的共享经济时代正在到来。
   共享经济正深度重塑中国的经济形态。从工农业生产到老百姓衣食住行，以物联网为基础的共享经济正给产能过剩、产品过剩、发展不平衡不充分的中国带来新的发展机会。共享经济中国模式渐成型 未来将保持40%高增长。同时我们也看到中国共享经济，正在走向服务全球化。
### 2.2 瓦贝链的设计理念 
   瓦贝链以共享房屋为核心，将闲置资产数字化，解决资产流动性问题和二次利用，使其发挥社会价值；之所以使用区块链技术来解决闲置资产流动问题，主要原因在于目前从全球范围来看，最能够引起市场关心和投资的资产是以区块链技术为核心的数字化资产，同时我们也看到共享经济离不开互联网，而共享经济搭乘价值互联网——区块链后将如虎添翼，由此诞生瓦贝链。
   瓦贝链的核心价值有三点：1）实业项目产品数字化，借区块链新成数字资产实现流动性；2）实业实现预售融资，0负担解决企业发展融资问题；3）消费回报。具体成操作见下述第三章第2项。
   瓦贝链在常规共享经济的基础上，引入回报共享，拿mobike单车案例（当然我们不会介入这个已经饱和的行业）为例：目前的情况是大家用小额消费的方式为mobike公司支付了一辆自行车的使用成本，后续大家消费使用这辆自行车的支出，将成为mobike公司的利润，或许mobike公司为了提高竞争力而降低使用费甚至阶段性免费，但mobike公司永远不会将到手的利润回馈给消费者，他只承认法律上的投资者，并给予回报，而不会承认那些不特定的消费群体其实才是mobike公司真正的投资者。基于现有的法律框架和商业逻辑，mobike公司无可厚非，形成了众星捧月般的商业帝国，其慈善行为饱受夸奖，尽管其利润来自平民的消费投资；瓦贝链打破这种格局，让消费者以区块链数字资产购买的方式购买“mobike”的使用权，就像他们花1元钱骑车一样，区块链中出售的“mobike”使用权也是1元/次并获得对应的数字资产token权限——瓦贝token,至此，瓦贝链消费者获得看似和mobike公司一样的权益，但实则不一样，瓦贝链赋予了消费者数字资产的增值和流动性是摩拜公司等共享经济模式不能提供的；与此同时，瓦贝链引入消费回报模式，即要求被消费投资的这些“摩拜公司”将大部分经营利润返还给消费投资者，当然由于token的高流动特点，我们的返回模式也是颇具创新，详见下述“共享房屋”为核心的回馈模式。

### 2.3 瓦贝链的设计原则 

   瓦贝链的核心设计原则在于将实体产品、服务产品数字化出售，购买者购得该数字产品后可进行二次转让交易、凭证消费、捐赠等。商家在链上预售出自己的产品后，所得资金用于发展自己的项目，向巨著公司（购买人代表，瓦贝链的主要发起人之一）开具统一增值税发票，其通过瓦贝链售出的产品统一由巨著公司统一代为管理，产品可分期交付，巨著公司也可以要求商家回购，由于商业项目资金来自购买者的消费投资因此有能力的商家将继续负责其预售产品所属项目的后期管理和收取不超过50%的管理费部分收益，其余50%的收益都打入瓦贝链的内部的银行托管专用公益账户，收益分配动作于预售产品交付或回购完成后确有利润产生时进行。瓦贝链公益账户由银行托管、瓦贝链发起机构、公证机构、律师事务所、审计机构共同管理，经审计的公益金账簿在各家网站公示；公益金专项用于补助币持有人在瓦贝链系统内的消费支出。瓦贝链商家的股份由瓦贝链发起人做风险控制，确保项目方履约。
### 2.4 产品模型与架构
                                      

### 2.5 技术创新
### 2.6 安全策略
## 三、升华：模块再造与功能重塑 

基于在金融行业的实践积累，以及对金融区块链解决方案的思考，金链盟开源工作组在BCOS开源平台的基础上，根据场景需求，进行模块升级与功能重塑，打磨FISCO BCOS开源平台，赋予其更好地服务金融机构的新功能、新特性与新能力。

### 3.1 互操作性升华：基于区块链网络的消息通信协议（AMOP） 

基于区块链体系，机构之间可以建立一个互相通信的网络。区块链的共识机制、区块数据交换已经可以承载机构之间交易往来，但随着业务场景的逐渐丰富，对"互操作性"也提出了更多要求。

机构和机构之间不仅有面向交易的事务性过程，还可能会向另一个机构发出实时通知，或者传递仅为两个机构之间共享的数据，或者在交易达成之前对定价等细节进行多次交互性协商，在这些流程中，机构们并不希望向整个网络广播数据，其部分数据最终也不一定需要写入链上交易。此前，机构之间通常有专线和特有的接口机来建立通信，如今在区块链已经建立了一个稳定高效网络的前提下，我们可以复用区块链网络的链路来完成通信。

所以，我们设计了一个高效、可靠的、基于区块链网络的消息通信协议，简称链上信使协议AMOP（Advanced Messenger On-chain Protocol）,聚焦以下功能：

-   基于区块链网络，支持跨行之间、点对点的实时消息通信；

-   为链下系统和区块链之间的交互提供标准化接口；

-   区块链系统可主动调用链下系统的业务接口；

这个协议的技术特点是：

-   在点对点的区块链网络拓扑中，规划节点通信路径，确保消息可达；

-   可快速感知区块链网络的节点异常，自动切换路径重发消息；

-   在通信过程中使用加密技术，保证通信层隐私。

![image3.1](./images/3-1.jpg "图3-1 AMOP架构")
<div align=center>图3-1 AMOP架构</div>

AMOP协议在金融机构之间的业务来往中可以提供灵活的互操作性，可以结合区块链来实现复杂的交易场景。考虑以下的场景：

A机构和B机构之间进行某种商品交易的价格协商或者份额撮合，其间需要往复多次协商，最终双方商定结果后，再按此结果发起链上交易，写入账本并达成确认。

在前期的往复协商撮合过程中，对实时性的要求较高，如毫秒级的响应速度，且过程并不需要链上其他机构参与或让其他机构得知细节，那么可以采用AMOP协议来进行点对点的保密通信，AMOP协议保证通信包并不会传递给其他机构的节点，物理上进行了隔离。

或者，当一个企业发起一个订单交易到链上，希望另一个企业快速跟进，进行链下审核、备货等等，可以通过AMOP协议，给对方一个通知消息，以启动并完成链下的各种工作，然后再到链上继续完成订单的后续流程，如付款等。

另外，在区块链和区块链之间的跨链通信环节，也可以引入AMOP做为消息通道，打通链和链之间的通信，交换区块和交易数据等。

### 3.2 运维能力升华：合约命名服务（CNS）

目前区块链的用户、帐户、智能合约等基本信息，在链上的体现为一个"地址"（Address），地址通常为一些固定长度的十六进制的数据标识，业务层需要使用这些地址时，会把地址通过数据库、配置文件等方式记录下来以便调用。这些数字型地址的问题在于：难以辨识其类型和对应的数据实例，难以记忆、书写、复用。

比如，业务层需要调用某个账目合约，那么需要配置一个类似这样的地址"0x92535066cd4b022c7e84b058d8bbbf71e22c3c78"，在日常运维、运营配置中，需要再用到这个账目合约时，就得确认这一段数字的完整性、正确性，才能正确调用这个地址上的合约接口，或者在运维查证过程中，根据这个地址去查询日志里的对应信息，或者在进行服务扩容时，在配置文件里去配置这一个地址。

另外，在这个账目合约因为业务逻辑的变化而被重新升级部署后，需要逐一去修改之前已经引用这个合约地址的所有业务模块，以指向新的合约的地址，整个过程繁琐且容易错漏。

因此，我们设计了合约命名服务CNS(Contract Name Service)。CNS的设计目标，是使业务层和智能合约之间的对应关系命名化，让业务层不再关心相关的合约地址。类似DNS之于互联网，域名的使用让用户更容易记住网站的访问方式，也让网站在集群化、迁移扩容方面都获得了巨大的灵活性。CNS的设计灵感也是来自互联网，且加强了对合约接口的信息管理，使合约可以将自己的接口信息在链上发布出去，让链上的所有参与者都可以方便的识别、定位、调用合约。

在智能合约部署时，CNS允许合约部署者给智能合约指定一个容易记忆和辨识的名字，如"DepositContract"，显而易见这是一个存款合约。业务层只需知道这个名字，就可以向存款合约发起交易，CNS会在处理交易之前确认名字对应的合约地址，并运行合约。

当存款合约被升级时，新版本合约的地址也会更新到CNS，只要原有的接口没有改变，则业务层不需要更改配置，基本上是无感知的持续运行即可，这样节约了大量的运维更迭的工作量，也使此过程出错的机率大大较少。

如果接口或者有重大的业务逻辑改变，业务需要灰度升级，在CNS里也可以保存新旧合约的两个地址，根据具体的灰度方案，由业务层指定，或者由CNS再结合路由规则的实现，将部分交易流量切换到新合约，待新合约的逻辑已经足够稳定，或者灰度放量达到100%，再将对旧合约的调用全部切换到新合约。

需要一提的是，业务灰度是个复杂的过程，不同的业务的灰度规则是不同的，CNS在平台层面提供了基础能力，如何灵活运用，需要按场景去进行分析和使用，如灰度升级时的路由寻址规则如何实现，平台将决定权交给实际使用的用户，由用户自主扩展。

### 3.3 金融级的性能升华：并行共识与并行计算 

#### 3.3.1 并行PBFT共识 

BCOS的PBFT共识机制已经针对联盟链的进行了定制，实现秒级出块，具备高一致性、高可用性，抗欺诈能力较强。

PBFT算法的过程是一次提案，几步投票直到最终确认，在这个过程中有复杂的状态机维护过程，投票往返步骤较多，且部分流程在节点内部以及节点之间是串行进行的，每一步都会需要互相等待，在其他上一阶段的计算完毕或网络通信收集数据完成，达成阶段性确认后再进入下一阶段。

由于流程复杂，数据往返较多，共识过程也容易受网络波动影响，对网路延迟和丢包比较敏感，在状况不理想的网络和计算环境可能需要多次共识的尝试才能达到最终一致性。

以上的技术挑战给系统带来的影响是，系统并行能力可能遇到瓶颈，或者交易的确认速度会偶发性延长。所以我们对PBFT算法进行了深度的优化。

在FISCO BCOS平台中，首先我们对共识过程进行了深入分析，按计算步骤，节点等维度进行分解，尽量让所有的节点在每个阶段的计算都是并行进行的，无论是议长节点还是投票节点，一个节点在运算验证一批交易的过程中，其他所有节点也在同步运算和给出投票，不需要互相等待。

![image3.2](./images/3-2.jpg "图3-2 并行PBFT共识流程")
<div align=center>图3-2 并行PBFT共识流程</div>


然后，我们对耗时较高，有次数冗余的计算过程进行了精简，通过关键路径优化，重复计算结果进行缓存等方式减少了共识过程中的每一步的耗时。

同时，我们对网络健康度、节点存活等因素进行检测，当发现有的记账节点无法服务时，快速切换到下一个记账节点，避免出现全体节点出现空等待的状况。

最后，我们考虑到金融交易的场景常常有高峰期和空闲期的特点，在空闲期系统没有交易流量的时候，共识机制进入心跳状态，只维护网络的健康状态，不产生包含交易数为0的空区块数据，避免不必要的存储浪费，以及避免空区块的同步流量和时间消耗。

#### 3.3.2标准RAFT共识 

BCOS原有的RAFT共识算法实现借鉴了RAFT协议的思想，同时也有别于标准RAFT协议，如各个节点通过竞争时间窗获取每一次出块的权利。

考虑到RAFT协议设计本身无法防止拜占庭错误，其应用通常是信任度较高的联盟链场景，我们为了让RAFT协议发挥其高性能的优势，在FISCO BCOS平台中对RAFT共识算法做了调整，采用标准RAFT协议的共识算法。

标准RAFT共识算法分为两个过程，第一个是"选举"过程，选举产生一个Leader；第二个是"记账"过程，Leader负责记账出块，Follower节点同步区块。当Leader宕机时，所有Follower节点触发"选举"流程，重新选出一个Leader。
![image3.3](./images/3-3.jpg "图3-3 标准RAFT共识流程")
<div align=center>图3-3 标准RAFT共识流程</div>


相比RAFT论文提及的算法，我们还针对网络抖动、网络延迟以及网络分区孤岛异常情况进行一系列优化，使RAFT共识算法能够满足更极端的网络环境。该RAFT算法具有N/2的容错能力，只要一半以上节点就可以正常服务。

为了使联盟链网络具有更高的扩展性，RAFT共识算法结合智能合约支持节点动态增加和退出网络，这也是该RAFT算法的一大亮点。

#### 3.3.3 并行计算和热点账户解决方案 

在研究和实现区块链平台和进行业务落地的过程中，区块链的运行速度往往会受多种因素影响，其中包括加密解密计算、交易广播和排序、共识算法多阶段提交的协作开销、虚拟机执行速度等，以及CPU核数主频、磁盘IO、网络带宽等。由于区块链先天是跨网络的分布式协作系统，注重安全性、可用性、容错性、一致性、事务性等，需要使用较复杂的算法和繁琐的多参与方协作机制来获得基于系统的自信任性、数据不可篡改性以及交易可追溯性等特殊功能优势，因此根据分布式的CAP原理，在同等的硬件资源投入的前提下，区块链的性能往往低于中心化的系统，其表现就是并发数不高，交易时延较明显。

我们已经在多个方面对系统运行的全流程进行细致的优化，包括加密解密计算、交易处理流程、共识算法、存储优化等，使我们的区块链平台在单链架构时，运行速度达到了一个较高的性能水准，基本能满足一般的金融业务要求。

不过，在面对用户数、交易量、存量数据较大或可能有显著增长的海量服务场景时，单链架构总是会遇到软件架构或硬件资源方面的瓶颈，难以满足高频海量的金融业务所需的容量和扩展性要求。

况且，区块链的系统特性决定，在区块链中增加节点，只会增强系统的容错性、增加参与者的授信背书等，而不会增加性能。增加节点并不能解决问题，这就需要通过架构上的调整来应对性能挑战，所以，我们提出了"并行计算，多链运行"的方案。

并行多链的架构基本思路是在一个区块链网络里，存在多个分组，每个组是一个完整的区块链网络，有独立的软件模块、硬件资源，可独立完成机构间共识，有独立的数据存储。

根据可定制的路由规则，参与到区块链网络的所有机构和用户，或者区块链里不同类型的交易，都可以接入到不同的分组里。每个分组处理特定的一部分交易，当机构或用户数增加，交易量变大或者交易类型增加，都可以快捷地增加分组，并在路由策略里进行设定，将新增的流量分配到新的分组里。并行多链架构类似数据库的分库分表，或者互联网服务的分SET模型，理论上只要投入足够的资源，则系统能处理的流量没有上限，整个系统具有足够的弹性。

同时，一个区块链网络里的多个分组秉承逻辑和配置高一致性的原则，在商业规则、运营管理上都使用统一的策略。比如，每个分组上的智能合约是完全相同的，核心配置数据也是相同的，只有分组里的机构、用户以及交易类型有所不同。

或者，虽然因为分组间功能设计的差异，导致不同分组上的智能合约有所不同。如一些分组是处理用户在线交易，强调低时延性；另一些分组是处理机构间的对账和清结算，关注批量数据处理。那么部署在这些分组上的智能合约会有所不同，但都会通过所有机构以及区块链的运营委员会共同确认，通过共识算法保证部署实施的一致性、透明度以及不可篡改性。

总之，平台提供了基础的分组策略和实现、路由模块、并行多链的构建工具等，如何根据业务场景设计不同的分组，如根据机构维度、用户维度还是交易维度，甚至是时间维度等，都可以再进行灵活的设计和操作。
![image3.4](./images/3-4.jpg "图3-4 并行计算多链架构")
<div align=center>图3-4 并行计算多链架构</div>


在实现了区块链分组后，分组之间有可能出现互相发生交易的场景，实际上就是不同区块链系统之间的通信和交易，类似"跨链"的架构。在这个环节，需要关注的是分组间的通信可靠性、分布式事务完整性和一致性，以及分组之间可验证、不可篡改、可追溯的互信性和交易安全性。

![image3.5](./images/3-5.jpg "图3-5 并行计算跨链交互")
<div align=center>图3-5 并行计算跨链交互</div>


在此版本中，我们还根据金融业常见的"热点帐户"场景，提出了一种解决方案。

在很多金融交易场景里，可能会出现大量的独立用户帐户和少数集中的一个或多个热点帐户产生交易的情况，如用户往某个热卖中的商户付款，或者用户频繁从某个帐户中提现或者获取优惠券、积分或者其他资产等，由于用户帐户数量较大,相对来说，这些被集中访问的商户帐户，就被称为"热点帐户"。热点帐户在完成和用户的交易之外，还需要汇总所有的交易结果，计算总分帐、余额等，以便完成其特有的商业流程，如清结算等。

![image3.6](./images/3-6.jpg "图3-6 热点账户架构")
<div align=center>图3-6 热点账户架构</div>

由于针对热点账户的交易量较大且所有用户都可能和它发生交易，我们考虑设计多个并行的交易链，首先将用户按照一定的性能模型分组，每个针对用户的分组而构建的独立的区块链组件，我们称为"用户交易链"。举例：预估为每个分组100万用户，5个分组能容纳500万用户（实际的每组能容纳的用户数需要根据业务场景实测评估），这样我们构建了5个"用户交易链"。

然后，热点帐户本身可以集中在一个热点账户的链上（也可以分配在某一个分组里），热点账户链主要用于准实时的汇总各"用户交易链"的账务，以管理热点账户的总分帐，如总收入、总支出、帐户准实时余额等。

为了支持用户和热点账户的交易，热点帐户在每个"用户交易链"上，都会设立一个影子户，用户在实时交易时，实际上是和"用户交易链"内的热点帐户影子户发生交易，每次交易都在用户交易链内部进行共识，不同的分组可以并行进行交易计算，互不相关，用户和影子户之间的交易完成后，即意味着用户和热点帐户的交易完成。系统的容量和用户交易链的个数有关，用户交易链越多，则系统容量越大，用户体验得到了保障。

在用户交易链上，热点帐户影子户里只保存该分组里的总分帐，即一部分用户进行交易后，影子户里产生的收入、支出等。用户交易链会定期构建一次链内账目清算交易，并向热点帐户链发起一次跨链汇总交易，热点帐户链接收到交易之后，会到用户交易链去验证交易发送者的身份、汇总交易的存在性、账目的真实性和准确性，验证成功后，在热点帐户链上继续进行账目计算和入账操作，流程结束。

整个过程会通过链间的中继，进行多次双向通信，且在不同的链上完整的执行共识确认。用户和影子户的交易可在一次共识的时间段内完成，时延较短，以满足用户体验。热点账户的总分帐计算为准实时完成，其时延取决于定时发起汇总交易的间隔，以及用户交易链和热点帐户链的共识时间。系统会保证用户交易链和热点帐户链之间的交易不错、不乱、不漏，具备事务一致性和完整性。

并行多链计算是一个基础的系统扩展方案，热点帐户的解决方案是一个场景性的实现，充分理解并行多链计算和跨链交易的实现后，可以针对有海量需求的各种金融交易场景，设计出不同的方案来，以解决具体的场景问题。

### 3.4 治理能力升华：浏览器与监控 

在联盟链治理过程中，如何清晰、便捷地监控联盟链运行状况，并支持监管和审计诉求，是我们始终关注的问题。为满足金融行业对数据结构化、可视化、可监管、可审计的要求，我们在区块链浏览器、监控体系方面，进行了重点研究。

首先，我们提供了区块链浏览器，将区块链上的数据可视化，并进行实时的展示；用户即使毫无技术背景，也可以通过web页面，方便地获取其所部署的区块链上的节点、区块和交易信息，同时查看历史的交易曲线，省去从区块链节点的RPC端口查询的繁琐操作。

![image3.7](./images/3-7.png "图3-7 区块链浏览器总览")
<div align=center>图3-7 区块链浏览器总览</div>


目前，用户通过浏览器可以实时获取的信息包括：

-   节点的ID、端口、块高等信息；

-   区块的块高、时间、交易数量、出块者等信息；

-   交易的HASH、所属块、块内ID、交易时间、发送者、接收者等信息；同时，用户也可以获取到正在处理的交易信息。

![image3.8](./images/3-8.png "图3-8 交易信息")
<div align=center>图3-8 交易信息</div>



使用区块链浏览器非常简单、便捷,只需对开源代码进行编译、准备数据库和web服务部署，即可快速打开区块链浏览器界面。同时，我们提供灵活的UI框架，开发者可以对浏览器界面进行定制，从而支持个性化或特定的应用场景。

另外，我们还优化了监控统计日志，使开发者可以快速获取区块链系统运行过程中的重要指标，从多个维度对系统运行状况进行评估。我们提供了数据库、共识算法、交易和区块四个维度的时间统计日志；同时，开发者也可以通过PBFT Flow的日志来了解每个区块从开始打包到最后上链的时间过程；或通过Transaction Flow的日志来了解每个区块从进入交易队列到最后上链的时间过程。

### 3.5 区块链和监管科技

随着金融科技的高速发展，新型业务的监管和合规也成为了金融业的焦点，如何采用科技手段来高效和精准地解决监管问题，推动企业遵循合规要求，对监管科技提出了更多的要求。FISCO BCOS在数据整合分析、交易管控、身份认证等方面进行深入探索，从而满足金融行业对于监管、风控等方面的高标准要求。

#### 3.5.1 风险数据整合

基于区块链上不可篡改、可追溯、分布式高一致性的数据，可以给与监管机构充分和透明的信息，交易参与方、交易明细、交易过程以及交易历史记录，都记录在区块链账本上，可以做到海量历史数据的完整妥善保存，且解决数据孤岛问题，满足风险数据结构化、明确、准确、完整的要求。

#### 3.5.2 风险建模，分析和预测 

将区块链上完成的数据与大数据挖掘、机器学习等技术进行有机结合，再整合市场数据，行业数据，可以制定更准确的风险模型，提高风险预测能力，满足机构全面风险管理的要求。

#### 3.5.3 实时交易监控，汇报和拦截

交易监控系统可以获取区块链上准实时的、高完整性和确定性的交易数据，有助于及时发现风险。

FISCO BCOS平台内置权限控制、系统治理控制，再结合图灵完备的智能合约及其强大的可编程性，可预置多种检测和拦截规则，如内置反洗钱黑名单以及检测规则，当发现异常交易时，及时发出告警，或者直接进行拦截，可允许监管方实时介入到交易过程中。

#### 3.5.4 身份识别 

区块链本身实现了高效的数字身份认证机制，接入到区块链系统的各种角色身份会经过审核，并通过唯一的公私钥对，或者CA证书进行标识，使得所有链上所有人的身份是可辨识且不可抵赖的。

结合金融业成熟的KYC制度，依靠客户审查尽调的结果数据，生物识别技术，以及客户信用数据等，可以为客户验身且在区块链上分配唯一的身份标识，如有需要，可采用信息脱敏流程、或密码学算法进行KYC信息的隐私保护，保证客户在链上具有确定且合法的身份，但敏感信息不会泄漏，同时监管方又可以获得足够的信息进行管控。

## 四、未来展望

回顾IT产业的发展历程，开源技术起到无与伦比的重大贡献作用。围绕开源技术形成开源组织或开源社区，可促进商业机构、科研机构、监管机构、教育机构、开发者、用户等相互之间的良性沟通、共享与协作氛围。在某种意义上，开源组织或开源社区也是互联网经济、共享经济、数字经济等新经济的基石。

金链盟开源工作组以打造一个适用于金融机构的区块链底层平台FISCO BCOS为契机，将凝聚同时熟悉金融行业业务逻辑和区块链技术实现的企业机构和开发者，开发技术人员不仅可在Github上参与FISCO BCOS开源项目，更可建立金融区块链的生态圈，促成开放的分布式技术协作模式，共同探索金融区块链的分布式商业应用。

FISCO BCOS平台计划在后续版本中逐步推出以下关键特性及开源活动，并和BCOS平台相互之间保持同步，整合更多有价值的功能，成为完备的金融业务基础设施。

### 4.1 国密算法改造

金融业务的交易数据具备高敏感度，甚至关系到金融体系安全。国密算法自主可控，不依赖于国外的技术，能极高程度地保护信息安全。

我们计划采用SM（公私钥密码算法，可实现数字签名），SM3（摘要算法），SM4（对称密码算法）等几个国密算法，对区块链平台里牵涉到密码的模块全面进行改造升级，所涵盖的模块包括身份认证、通信加密、存储加密、唯一性标识和数据签名验签等。基于国密算法，可保证身份认证的准确性和可信性、交易行为的不可否认性、数据有效性、数据完整性和不可篡改性，以及进行隐私保护。

同时，我们也将引入基于国密的硬件加密机制，包括USBkey、加密机、智能卡等，以满足各种金融场景需求。

### 4.2 区块链云服务

区块链云服务技术提供了规模化的、合规的、安全的区块链技术相关的基础软硬件平台，在服务层面对区块链的功能进行封装，提供标准简单的开发接口，在基础设施层面通过金融云平台的支持，支持快速交付和软硬件升级，易于运营和运维，使金融业务开发者可以专注在自己的业务领域，并基于区块链技术，快速和安全地推出可面向市场运营的业务、采购、开发、运维成本都会大幅降低。

我们将基于FISCO BCOS版本，在云平台发布区块链云服务器镜像，使用云平台界面交互和其他工具，可快速构建区块链服务，进行应用部署和服务器参数调整。在服务运行期，可对区块链服务进行立体监控，保证其健壮性和可用性。

出于金融业务对安全性和合规性的要求，推荐使用金融云机房部署区块链服务。金融云方案可提供专有物理隔离、独立网络核心的合规IDC，支持统一管控，以及高强度的安全防护能力，能满足金融级区块链服务既要共享数据互联互通，又需要保护隐私和交易安全的苛刻要求。

### 4.3 支持多CA认证

FISCO BCOS平台已经使用CA证书作为机构认证，节点准入的重要判定手段。具备资质的CA中心作为可信第三方，颁发CA证书为机构背书，有效的形成保障信息机密性、完整性、抗抵赖的解决方案。

同时，诸多的CA中心所在地域或面向行业有所不同，所颁发的CA证书的互通性会被信任体系和服务协议影响，不同CA机构颁发的证书在数据机构、安全协议、有效性和安全等级上都有所不同。另外，有如区块链这样的分布式系统只依赖于单一CA服务机构，可能出现单点问题，影响了可用性。

所以，我们在平台架构上提出一个面向CA的抽象实现层，便于接入不同的CA机构证书，这个抽象层关注CA证书使用环节的兼容性、可用性、规范性、安全性。通过多CA抽象层的封装和接入，不同的CA机构都可以为区块链上的机构、节点、交易员等身份给出统一视图的信用背书，如有必要，一个链上机构可以同时采用多个CA机构的证书。形成一种"多中心"认证的形态，可提升区块链系统的信用等级，改善机构体验，增强系统可用性。

### 4.4 区块链数据仓库

FISCO BCOS核心数据模块采用链式数据结构，Key-Value数据元格式，使用高速的文件数据库保存所有数据，适合存储区块和交易明细、合约状态等，但不适合进行关系型查询、动态范围查询，不能直接进行多维度的分析。

所以，我们计划输出一个"区块链数据仓库"的解决方案，使区块链和已经为人熟知的关系型数据，分布式数据库，大数据平台进行有机结合。

为区块链设置一个准实时的数据ETL（Extract-Transform-Load）流程，使得链上一旦新生成区块，就能立刻把相关的区块证明，区块里包含的交易列表、交易明细、交易结果、智能合约状态数据、链上配置信息等全部导入到链外的数据仓库里，数据仓库的数据只增不减，写入后不会再发生变化，且随时可以和链上数据源进行比对验证，保证其完整性和不可篡改性，借助数据仓库本身强大的查询能力、分析能力和数据挖掘能力，可以对区块链上产生的数据进行复杂的整合和加工，以满足商业智能、监管监控、反洗钱、数据报送等场景的需求。

### 4.5 开源运营

在不断进行金融区块链技术探索的同时，开源工作组还将积极运营开源，推广FISCO BCOS:

-   通过优化部署工具、丰富样例、完善技术知识库等方式，降低开发者学习和使用门槛，引导开发者快速入门金融区块链技术，使社区更加活跃、技术更加成熟。

-   在全国各大城市，组织不同主题且面向不同对象的开发者活动，鼓励更多有志于区块链技术的开发者或单位参与FISCO BCOS的技术优化或应用探索。目前在计划中的活动包括：面向FISCO BCOS开发者的编程马拉松，以及鼓励开发者和企业单位共同参与的FISCO BCOS应用大赛等。以上活动计划分时间段、分城市逐步展开，使国内外开发者和企业都可以参与到FISCO BCOS开源社区中。

-   制定入门、中阶、高阶等不同层级的培训课程，邀请行业专家与FISCO BCOS开发团队一起，通过在线课程和线下讲座等方式为开发者提供培训。开发者参与自己感兴趣培训的同时，还可以进行培训认证。开源工作组会制定区块链底层技术、应用等不同类别的认证体系和标准，方便开发者不断了解自身的能力层级和学习需求，逐步成长为行业专家。

另外，开源工作组欢迎业界同仁共同探索和孵化金融区块链领域的分布式商业应用。对于使用FISCO BCOS进行应用探索的企业单位，工作组会提供专业的企业级的区块链解决方案及培训、咨询服务。

展望未来，金链盟开源工作组将整合愈来愈多的金链盟成员单位的技术资源与商业力量，缔造一个深度互信的金融区块链价值共同体，欢迎加入共同探索！

## 参考文献

\[1\]《BCOS平台白皮书 V1.0------面向分布式商业的区块链基础设施》，2017年7月，微众银行、万向区块链、矩阵元

\[2\]《In Search of an Understandable Consensus Algorithm (Extended Version)》，2013年，Diego Ongaro and John Ousterhout

\[3\]《Practical Byzantine Fault Tolerance》，1999年，Miguel Castro and Barbara Liskov

## 关于我们

金链盟全称金融区块链合作联盟（深圳），是由深圳市金融科技协会、深圳前海微众银行、深证通等二十余家金融机构和科技企业于2016年5月31日共同发起成立的非营利性组织。金链盟作为一个开放式组织，自愿遵守章程的金融机构及向金融机构提供科技服务的企业等均可申请加入。至今，金链盟成员已涵括银行、基金、证券、保险、地方股权交易所、科技公司等六大类行业的八十余家机构。

金链盟区块链底层开源平台（FISCO BCOS），由金链盟开源工作组协作打造。工作组成员包括博彦科技、华为、深证通、神州数码、四方精创、腾讯、微众银行和越秀金科等金链盟成员机构，旨在打造安全可控、适用于金融领域的区块链底层平台。

您可以通过以下方式，进一步了解FISCO BCOS及金链盟的相关信息：

-   源码地址：[https://github.com/fisco-bcos](https://github.com/fisco-bcos)

-   联系邮箱：<service@fisco.com.cn>

-   金链盟官网：[www.fisco.com.cn](http://www.fisco.com.cn)
